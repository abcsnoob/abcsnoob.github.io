<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abc's Noob - Login/Register</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .container { margin: 20px; }
        input { padding: 10px; margin: 5px; width: 80%; }
        button { padding: 10px 20px; font-size: 16px; margin: 5px; }
        .hidden { display: none; }
        .logo { margin-top: 10px; }
    </style>
</head>
<body>

    <!-- Login & Register Form -->
    <div class="container">
        <h2>Abc's Noob - ACCOUNTS</h2>
        <div id="loginForm">
            <h3>Login</h3>
            <input type="email" id="loginEmail" placeholder="Email" />
            <input type="password" id="loginPassword" placeholder="Password" />
            <button id="loginBtn">Login</button>
            <p>Don't have an account? <a href="#" id="goToRegister">Register</a></p>
        </div>

        <div id="registerForm" class="hidden">
            <h3>Register</h3>
            <input type="text" id="registerName" placeholder="Username" />
            <input type="email" id="registerEmail" placeholder="Email" />
            <input type="password" id="registerPassword" placeholder="Password" />
            <button id="registerBtn">Register</button>
            <p>Already have an account? <a href="#" id="goToLogin">Login</a></p>
        </div>

        <!-- Google and GitHub login buttons -->
        <div>
            <button id="googleLoginBtn">Login with Google</button>
            <button id="githubLoginBtn">Login with GitHub</button>
        </div>
    </div>

    <!-- Password Reset -->
    <div class="container">
        <h3>Password Reset</h3>
        <input type="email" id="resetEmail" placeholder="Enter your email to reset password" />
        <button id="resetPasswordBtn">Send Reset Link</button>
    </div>

    <!-- Firebase Initialization -->
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "YOUR_FIREBASE_API_KEY",
            authDomain: "YOUR_FIREBASE_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_FIREBASE_PROJECT_ID",
            storageBucket: "YOUR_FIREBASE_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        const loginBtn = document.getElementById("loginBtn");
        const registerBtn = document.getElementById("registerBtn");
        const goToRegister = document.getElementById("goToRegister");
        const goToLogin = document.getElementById("goToLogin");
        const googleLoginBtn = document.getElementById("googleLoginBtn");
        const githubLoginBtn = document.getElementById("githubLoginBtn");
        const resetPasswordBtn = document.getElementById("resetPasswordBtn");

        const loginForm = document.getElementById("loginForm");
        const registerForm = document.getElementById("registerForm");

        const registerName = document.getElementById("registerName");
        const registerEmail = document.getElementById("registerEmail");
        const registerPassword = document.getElementById("registerPassword");

        const loginEmail = document.getElementById("loginEmail");
        const loginPassword = document.getElementById("loginPassword");
        const resetEmail = document.getElementById("resetEmail");

        // Handle Register
        registerBtn.addEventListener("click", () => {
            const name = registerName.value;
            const email = registerEmail.value;
            const password = registerPassword.value;

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    user.updateProfile({
                        displayName: name
                    }).then(() => {
                        user.sendEmailVerification()
                            .then(() => {
                                Swal.fire('Success', 'Registration successful! Please verify your email.', 'success');
                                registerForm.classList.add('hidden');
                                loginForm.classList.remove('hidden');
                            })
                            .catch((error) => Swal.fire('Error', error.message, 'error'));
                    });
                })
                .catch((error) => Swal.fire('Error', error.message, 'error'));
        });

        // Handle Login
        loginBtn.addEventListener("click", () => {
            const email = loginEmail.value;
            const password = loginPassword.value;

            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    const user = auth.currentUser;
                    if (!user.emailVerified) {
                        Swal.fire('Please verify your email', 'A verification link has been sent to your email address.', 'info');
                    } else {
                        Swal.fire('Success', 'Logged in successfully!', 'success');
                    }
                })
                .catch((error) => Swal.fire('Error', error.message, 'error'));
        });

        // Switch to Register Form
        goToRegister.addEventListener("click", () => {
            loginForm.classList.add('hidden');
            registerForm.classList.remove('hidden');
        });

        // Switch to Login Form
        goToLogin.addEventListener("click", () => {
            registerForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
        });

        // Handle Google Login
        googleLoginBtn.addEventListener("click", () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    Swal.fire('Success', 'Logged in with Google!', 'success');
                })
                .catch((error) => Swal.fire('Error', error.message, 'error'));
        });

        // Handle GitHub Login
        githubLoginBtn.addEventListener("click", () => {
            const provider = new firebase.auth.GithubAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    Swal.fire('Success', 'Logged in with GitHub!', 'success');
                })
                .catch((error) => Swal.fire('Error', error.message, 'error'));
        });

        // Handle Password Reset
        resetPasswordBtn.addEventListener("click", () => {
            const email = resetEmail.value;
            auth.sendPasswordResetEmail(email)
                .then(() => {
                    Swal.fire('Success', 'Password reset email sent!', 'success');
                })
                .catch((error) => Swal.fire('Error', error.message, 'error'));
        });
    </script>

</body>
</html>
